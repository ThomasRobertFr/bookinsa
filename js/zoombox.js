var zoombox_path="includes/zoombox/";(function(a){function R(){scrOfX=0;if(typeof window.pageXOffset=="number"){scrOfX=window.pageXOffset}else if(document.body&&document.body.scrollLeft){scrOfX=document.body.scrollLeft}else if(document.documentElement&&document.documentElement.scrollLeft){scrOfX=document.documentElement.scrollLeft}return scrOfX}function Q(){scrOfY=0;if(typeof window.pageYOffset=="number"){scrOfY=window.pageYOffset}else if(document.body&&document.body.scrollTop){scrOfY=document.body.scrollTop}else if(document.documentElement&&document.documentElement.scrollTop){scrOfY=document.documentElement.scrollTop}return scrOfY}function P(){if(window.innerWidth)return window.innerWidth;else{return a(window).width()}}function O(){if(window.innerHeight)return window.innerHeight-b.margeBas;else{return a(window).height()-b.margeBas}}function N(){g=b.width;h=b.height;if(d!=null){var a=/w([0-9]+)/;var c=a.exec(d.attr("class"));if(c!=null){if(c[1]){g=c[1]}}var e=/h([0-9]+)/;var f=e.exec(d.attr("class"));if(f!=null){if(f[1]){h=f[1]}}}return false}function M(a){if(a==37){K()}if(a==39){J()}if(a==27){F()}}function L(){a("#zoombox .zoombox_container").css({top:(O()-a("#zoombox .zoombox_container").outerHeight(true))/2,left:(P()-a("#zoombox .zoombox_container").outerWidth(true))/2})}function K(){j=m-1;if(j<0){j=n.length-1}I(j)}function J(){j=m+1;if(j>n.length-1){j=0}I(j)}function I(b){if(o!="opened"){return false}m=b;d=n[m];f=d.attr("href");if(a("#zoombox .zoombox_gallery img").length>0){a("#zoombox .zoombox_gallery img").removeClass("current");a("#zoombox .zoombox_gallery img:eq("+b+")").addClass("current")}B();return false}function H(b){if(b.complete){j=0;window.clearInterval(i);g=b.width;h=b.height;a("#zoombox_loader").remove();G();E()}a("#zoombox_loader").css({"background-position":"0px "+j+"px"});j=j-40;if(j<-440){j=0}}function G(){if(b.overflow==false){if(g*1+50>P()){h=(P()-50)*h/g;g=P()-50}if(h*1+50>O()){g=(O()-50)*g/h;h=O()-50}}var a=f;l="multimedia";if(q.test(a)){l="img";k='<img src="'+f+'" width="100%" height="100%"/>'}else if(r.test(a)){g=300;h=40;k='<object type="application/x-shockwave-flash" data="'+MP3Player+"?son="+a+'" width="'+g+'" height="'+h+'">';k+='<param name="movie" value="'+MP3Player+"?son="+a+'" /></object>'}else if(s.test(a)){var c=0;if(b.autoplay==true){c=1}k='<object type="application/x-shockwave-flash" data="'+zoombox_path+'FLVplayer.swf" width="'+g+'" height="'+h+'">\n<param name="allowFullScreen" value="true">\n<param name="scale" value="noscale">\n<param name="wmode" value="transparent">\n<param name="flashvars" value="flv='+a+"&autoplay="+c+'">\n<embed src="'+zoombox_path+'FLVplayer.swf" width="'+g+'" height="'+h+'" allowscriptaccess="always" allowfullscreen="true" flashvars="flv='+a+'" wmode="transparent" />\n</object>'}else if(t.test(a)){k='<object width="'+g+'" height="'+h+'"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="'+a+'" /><embed src="'+a+'" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+g+'" height="'+h+'" wmode="transparent"></embed></object>'}else if(u.test(a)){k='<embed src="'+a+'" width="'+g+'" height="'+h+'" controller="true" cache="true" autoplay="true"/>'}else if(v.test(a)){k='<embed src="'+a+'" width="'+g+'" height="'+h+'" controller="true" cache="true" autoplay="true" wmode="transparent" />'}else if(w.test(a)){var d=a.split("_");d=d[0].split("/");d=d[d.length-1];if(b.autoplay==true){d=d+"&autostart=1"}k='<object width="'+g+'" height="'+h+'"><param name="movie" value="http://www.dailymotion.com/swf/'+d+'&colors=background:000000;glow:000000;foreground:FFFFFF;special:000000;&related=0"></param><param name="allowFullScreen" value="true"></param><param name="allowScriptAccess" value="always"></param><embed src="http://www.dailymotion.com/swf/'+d+'&colors=background:000000;glow:000000;foreground:FFFFFF;special:000000;&related=0" type="application/x-shockwave-flash" width="'+g+'" height="'+h+'" allowFullScreen="true" allowScriptAccess="always" wmode="transparent" ></embed></object>'}else if(x.test(a)){var d=a.split("/");d=d[3];if(b.autoplay==true){d=d+"&autoplay=1"}k='<object width="'+g+'" height="'+h+'"><param name="allowfullscreen" value="true" />\t<param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="movie" value="http://www.vimeo.com/moogaloop.swf?clip_id='+d+'&server=www.vimeo.com&show_title=1&show_byline=1&show_portrait=1&color=00AAEB&fullscreen=1" />\t<embed src="http://www.vimeo.com/moogaloop.swf?clip_id='+d+'&server=www.vimeo.com&show_title=1&show_byline=1&show_portrait=1&color=00AAEB&fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+g+'" height="'+h+'" wmode="transparent" ></embed></object>'}else if(y.test(a)){var d=a.split("watch?v=");d=d[1].split("&");d=d[0];if(b.autoplay==true){d=d+"&autoplay=1"}k='<object width="'+g+'" height="'+h+'"><param name="movie" value="http://www.youtube.com/v/'+d+'&hl=fr&rel=0&color1=0xFFFFFF&color2=0xFFFFFF&hd=1"></param><embed src="http://www.youtube.com/v/'+d+'&hl=fr&rel=0&color1=0xFFFFFF&color2=0xFFFFFF&hd=1" type="application/x-shockwave-flash" width="'+g+'" height="'+h+'" wmode="transparent"></embed></object>'}else if(z.test(a)){a=a.split(".html");a=a[0];k='<object type="application/x-shockwave-flash" data="'+a+'" width="'+g+'" height="'+h+'"><param name="movie" value="'+a+'"><embed src="'+a+'" type="application/x-shockwave-flash" width="'+g+'" height="'+h+'"  wmode="transparent"></embed></object>'}else{k='<iframe src="'+a+'" width="'+g+'" height="'+h+'" border="0"></iframe>'}return k}function F(){o="closing";window.clearInterval(i);a(window).unbind("keydown");a(window).unbind("resize");if(l=="multimedia"){a("#zoombox .zoombox_container").empty()}var c={};if(d!=null&&d.find("img").length>0){var f=d.find("img");c={width:f.width(),height:f.height(),top:f.offset().top,left:f.offset().left,opacity:0,marginTop:f.css("marginTop")}}else if(d!=null){c={width:d.width(),height:d.height(),top:d.offset().top,left:d.offset().left,marginTop:0,opacity:0}}else{c={width:100,height:100,top:O()/2-50,left:P()/2-50,opacity:0}}if(b.animation==true){a("#zoombox .zoombox_mask").fadeOut(200);a("#zoombox .zoombox_gallery").animate({bottom:-a("#zoombox .zoombox_gallery").innerHeight()},b.duration);a("#zoombox .zoombox_container").animate(c,b.duration,function(){a("#zoombox").remove();o="closed";e=false})}else{a("#zoombox").remove();o="closed";e=false}}function E(){if(e==false)C();else a("#zoombox .zoombox_title").empty();a("#zoombox .close").hide();a("#zoombox .zoombox_container").removeClass("multimedia").removeClass("img").addClass(l);if(d!=null&&d.attr("title")){a("#zoombox .zoombox_title").append(d.attr("title"))}a("#zoombox .zoombox_content").empty();if(l=="img"&&e==false&&b.animation==true){a("#zoombox .zoombox_content").append(k)}if(d!=null&&d.find("img").length!=0&&e==false){var c=d.find("img");a("#zoombox .zoombox_container").css({width:c.width(),height:c.height(),top:c.offset().top,left:c.offset().left,opacity:0,marginTop:c.css("marginTop")})}else if(d!=null&&e==false){a("#zoombox .zoombox_container").css({width:d.width(),height:d.height(),top:d.offset().top,left:d.offset().left})}else if(e==false){a("#zoombox .zoombox_container").css({width:100,height:100,top:O()/2-50,left:P()/2-50})}var f={width:g,height:h,left:(P()-g)/2,top:(O()-h)/2,marginTop:Q(),opacity:1};a("#zoombox").trigger("change",f);if(b.animation==true){a("#zoombox .zoombox_title").hide();a("#zoombox .zoombox_close").hide();a("#zoombox .zoombox_container").animate(f,b.duration,function(){if(l=="multimedia"||e==true){a("#zoombox .zoombox_content").append(k)}if(l=="image"||e==true){a("#zoombox .zoombox_content img").css("opacity",0).fadeTo(300,1)}a("#zoombox .zoombox_title").fadeIn(300);a("#zoombox .zoombox_close").fadeIn(300);o="opened";if(!e){D()}e=true});a("#zoombox .zoombox_mask").fadeTo(200,b.opacity)}else{a("#zoombox .zoombox_content").append(k);a("#zoombox .zoombox_close").show();a("#zoombox .zoombox_gallery").show();a("#zoombox .zoombox_container").css(f);a("#zoombox .zoombox_mask").show();a("#zoombox .zoombox_mask").css("opacity",b.opacity);if(!e){D()}e=true;o="opened"}}function D(){var c=0;var d=0;var e=0;if(b.gallery){if(n===false){a("#zoombox .zoombox_gallery").remove();return false}for(var f in n){var g=zoombox_path+"img/video.png";var h=a('<img src="'+g+'" class="video gallery'+f*1+'"/>');if(q.test(n[f].attr("href"))){g=n[f].attr("href");h=a('<img src="'+g+'" class="gallery'+f*1+'"/>')}h.data("id",f).appendTo("#zoombox .zoombox_gallery");h.click(function(){I(a(this).data("id"));a("#zoombox .zoombox_gallery img").removeClass("current");a(this).addClass("current")});if(f==m){h.addClass("current")}a("<img/>").data("img",h).attr("src",g).load(function(){c++;var b=a(this).data("img");b.width(Math.round(b.height()*this.width/this.height));if(c==a("#zoombox .zoombox_gallery img").length){var d=0;a("#zoombox .zoombox_gallery img").each(function(){d+=a(this).outerWidth();a(this).data("left",d)});var f=a("<div>").css({position:"absolute",top:0,left:0,width:d});a("#zoombox .zoombox_gallery").wrapInner(f);e=a("#zoombox .zoombox_gallery").width();a("#zoombox").trigger("change")}})}a("#zoombox .zoombox_gallery").show().animate({bottom:0},b.duration)}a("#zoombox").bind("change",function(c,d){if(a("#zoombox .zoombox_gallery div").width()<a("#zoombox .zoombox_gallery").width){return true}var e=0;var f=0;if(d!=null){e=b.duration;f=d.width/2}else{f=a("#zoombox .zoombox_gallery").width()/2}var g=-a("#zoombox .zoombox_gallery img.current").data("left")+a("#zoombox .zoombox_gallery img.current").width()/2;var h=g+f;if(h<f*2-a("#zoombox .zoombox_gallery div").width()){h=f*2-a("#zoombox .zoombox_gallery div").width()}if(h>0){h=0}a("#zoombox .zoombox_gallery div").animate({left:h},e)})}function C(){a("body").append(p);a(window).keydown(function(a){M(a.which)});a(window).resize(function(){L()});a("#zoombox .zoombox_mask").hide();a("#zoombox").addClass(b.theme);a("#zoombox .zoombox_mask,.zoombox_close").click(function(){F();return false});if(n==false){a("#zoombox .zoombox_next,#zoombox .zoombox_prev").remove()}else{a("#zoombox .zoombox_next").click(function(){J()});a("#zoombox .zoombox_prev").click(function(){K()})}}function B(){if(o=="closed")e=false;o="load";N();if(q.test(f)){img=new Image;img.src=f;a("body").append('<div id="zoombox_loader"></div>');a("#zoombox_loader").css("marginTop",Q());i=window.setInterval(function(){H(img)},100)}else{G();E()}}var b={theme:"zoombox",opacity:.8,duration:800,animation:true,width:600,height:400,gallery:false,autoplay:false,overflow:false,margeBas:100};var c;var d;var e=false;var f;var g;var h;var i;var j=0;var k;var l="multimedia";var m=false;var n=false;var o="closed";var p='<div id="zoombox"> \n<div class="zoombox_mask"></div>\n<div class="zoombox_container">\n<div class="zoombox_content"></div>\n<div class="zoombox_title"></div>\n<div class="zoombox_next"></div>\n<div class="zoombox_prev"></div>\n<div class="zoombox_close"></div>\n</div>\n<div class="zoombox_gallery"></div>\n</div>';var q=/(\.jpg)|(\.jpeg)|(\.bmp)|(\.gif)|(\.png)/i;var r=/(\.mp3)/i;var s=/(\.flv)/i;var t=/(\.swf)/i;var u=/(\.mov)|(\.mp4)/i;var v=/(\.wmv)|(\.avi)/i;var w=/(http:\/\/www.dailymotion)|(http:\/\/dailymotion)/i;var x=/(http:\/\/www.vimeo)|(http:\/\/vimeo)/i;var y=/(youtube\.)/i;var z=/(http:\/\/www\.koreus)|(http:\/\/koreus)/i;var A=0;a.zoombox=function(a,b){};a.zoombox.options=b;a.zoombox.close=function(){F()};a.zoombox.open=function(c,e){d=null;f=c;b=a.extend({},a.zoombox.options,e);B()};a.zoombox.html=function(c,e){k=c;b=a.extend({},a.zoombox.options,e);g=b.width;h=b.height;d=null;E()};a.fn.zoombox=function(e){c=new Array;return this.each(function(){if(a.browser.msie&&a.browser.version<7&&!window.XMLHttpRequest){return false}var g=this;var h=/zgallery([0-9]+)/;var i=h.exec(a(this).attr("class"));var j=false;if(i!=null){if(!c[i[1]]){c[i[1]]=new Array}c[i[1]].push(a(this));var k=c[i[1]].length-1;j=c[i[1]]}a(this).unbind("click").click(function(){b=a.extend({},a.zoombox.options,e);if(o!="closed")return false;d=a(g);f=d.attr("href");n=j;m=k;B();return false})})}})(jQuery);$(document).ready(function(){$("a[class^='zoombox']").zoombox()})